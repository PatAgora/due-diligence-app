{% extends "base.html" %}
{% block content %}
<style>
  :root { --scru-orange:#ff6a00; --scru-dark:#111111; --badge-turquoise:#20c997; --page-gap:120px; }

  html, body { height:100%; background:#ffffff; }
  body { margin:0 !important; padding:0 !important; }

  .auth-shell{
    position: fixed;
    inset: 0;
    display:flex;
    align-items:center;
    justify-content:center;
    background:#ffffff;
    font-family:'Segoe UI', system-ui, -apple-system, sans-serif;
  }

  .auth-card{
    width:100%;
    max-width:1120px;
    border-radius:26px;
    overflow:hidden;
    box-shadow:0 16px 48px rgba(0,0,0,.18);
    display:grid;
    grid-template-columns:minmax(0,1fr) minmax(0,1fr);
    background:#fff;
    height: clamp(640px, calc(100vh - var(--page-gap)), 900px);
  }

  .auth-left{
    background:var(--scru-dark);
    padding:64px 56px;
    color:#fff;
    display:flex; flex-direction:column; align-items:center; justify-content:center;
    text-align:center; gap:10px;
  }
  
  /* Enhanced logo-wrapper with pulsing glow effect */
  .logo-wrapper{ 
    width:96px; 
    height:96px; 
    border:3px solid var(--scru-orange); 
    border-radius:50%; 
    display:flex; 
    align-items:center; 
    justify-content:center; 
    margin-bottom:14px;
    position: relative;
    animation: pulseGlow 2.5s ease-in-out infinite;
  }
  
  /* Keyframe animation for the soft pulsing glow */
  @keyframes pulseGlow {
    0%, 100% {
      box-shadow: 
        0 0 0 0 rgba(255, 106, 0, 0.4),
        0 0 0 0 rgba(255, 106, 0, 0.2),
        0 0 20px rgba(255, 106, 0, 0.1);
    }
    50% {
      box-shadow: 
        0 0 0 8px rgba(255, 106, 0, 0.15),
        0 0 0 16px rgba(255, 106, 0, 0.08),
        0 0 30px rgba(255, 106, 0, 0.3);
    }
  }
  
  .logo-wrapper img{ 
    width:56px; 
    height:56px; 
    object-fit:contain; 
    display:block;
    animation: magnifyingGlassGlow 2.5s ease-in-out infinite;
  }
  
  /* Shape-aware glow animation for the magnifying glass */
  @keyframes magnifyingGlassGlow {
    0%, 100% {
      filter: 
        drop-shadow(0 0 3px rgba(255, 106, 0, 0.6))
        drop-shadow(0 0 6px rgba(255, 106, 0, 0.3))
        drop-shadow(0 0 9px rgba(255, 106, 0, 0.1));
    }
    50% {
      filter: 
        drop-shadow(0 0 6px rgba(255, 106, 0, 0.9))
        drop-shadow(0 0 12px rgba(255, 106, 0, 0.6))
        drop-shadow(0 0 18px rgba(255, 106, 0, 0.3))
        drop-shadow(0 0 24px rgba(255, 106, 0, 0.1));
    }
  }
  .brand-title{ margin:0; line-height:1.12; font-weight:800; font-size:2.25rem; color:#fff; }
  .brand-title .highlight{ color:var(--scru-orange); display:block; }
  .tagline{ font-size:.93rem; margin:10px 0 18px; color:#cfcfcf; max-width:520px; }
  .feature{ display:flex; align-items:center; justify-content:center; gap:10px; margin-bottom:8px; font-size:.93rem; color:#fff; }
  .feature i{ font-size:1.05rem; color:var(--scru-orange); }

  .auth-right{ background:#ffffff; display:flex; align-items:center; justify-content:center; padding:64px 56px; }
  .login-box{ width:100%; max-width:580px; } /* widened so subtitle fits one line */

  /* Centered brand row above heading; nudged slightly left */
  .brand-mark{
    display:flex;
    align-items:center;
    justify-content:center;
    gap:8px;                /* a touch tighter */
    width: fit-content;
    margin: 0 auto 6px;
    color:#0a1e3c;
    font-weight:700;
    font-size:1rem;
    line-height:1;
    transform: translateX(-4px); /* tiny left nudge for perfect visual centering */
  }
  .brand-mark .mark-icon{ width:20px; height:20px; display:inline-flex; }
  .brand-mark .mark-icon svg{ width:20px; height:20px; stroke: var(--scru-orange); stroke-width:3; fill:none; }

  .login-box h3{
    text-align:center; margin:8px 0 8px;
    color:#0a1e3c; font-weight:800; font-size:2.25rem;
  }
  .subcopy{
    text-align:center;
    color:#8b8f97;
    font-size:.95rem;        /* slight reduction to help fit */
    line-height:1.45;
    margin: 0 0 18px;
    white-space: nowrap;     /* keep on one line */
  }

  .form-control{ border-radius:12px; height:48px; }
  .btn-login{ background-image:linear-gradient(90deg,#ff6a00,#ff8840); border:none; color:#fff; height:48px; border-radius:12px; font-weight:600; }
  .forgot-password{ margin-top:8px; font-size:.9rem; text-align:right; }
  .forgot-password a{ color:#0a1e3c; text-decoration:none; }
  .forgot-password a:hover{ text-decoration:underline; }
  .legal{ margin-top:20px; color:#70757a; font-size:.8rem; text-align:center; }
  .badges{ display:flex; gap:18px; justify-content:center; align-items:center; margin-top:8px; flex-wrap:nowrap; white-space:nowrap; }
  .badge-item{ display:flex; align-items:center; gap:6px; color:#6b7280; font-weight:600; font-size:.8rem; flex:0 0 auto; }
  .badge-item i{ font-size:.9rem; color:var(--badge-turquoise); }

  @media (max-width:960px){
    .auth-card{ grid-template-columns:1fr; height:auto; }
    .auth-left, .auth-right{ padding:40px 28px; }
    .login-box{ max-width:100%; }
    .subcopy{ white-space:normal; } /* allow wrapping on small screens */
    .login-box h3{ font-size:2rem; }
  }
</style>

<div class="auth-shell">
  <div class="auth-card">
    <!-- Left: branding -->
    <div class="auth-left">
      <div class="logo-wrapper">
        <img src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='56' height='56' viewBox='0 0 66 66'><g fill='none' stroke='%23ff6a00' stroke-width='5'><circle cx='28' cy='28' r='18'/><line x1='41' y1='41' x2='62' y2='62' stroke-linecap='round'/></g></svg>"
             alt="Scrutinise Logo">
      </div>
      <h1 class="brand-title">
        <span>Scrutinise</span>
        <span class="highlight">Due Diligence</span>
      </h1>
      <div class="tagline">Financial Crime Due Diligence Workflow and Reporting</div>
      <div class="feature"><i class="bi bi-speedometer2"></i><span>Real-time Analytics</span></div>
      <div class="feature"><i class="bi bi-journal-check"></i><span>Regulatory Standard Audit Trails</span></div>
      <div class="feature"><i class="bi bi-diagram-3"></i><span>Customisable Workflows</span></div>
    </div>

    <!-- Right: form -->
    <div class="auth-right">
      <div class="login-box">
        <div class="brand-mark">
          <span class="mark-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <circle cx="11" cy="11" r="7"></circle>
              <line x1="16.5" y1="16.5" x2="22" y2="22" stroke-linecap="round"></line>
            </svg>
          </span>
          <span>Scrutinise</span>
        </div>
        <h3>Welcome</h3>
        <div class="subcopy">Sign in to access your Due Diligence workflow and analytics tool</div>

        <form method="POST">
          <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
          <div class="mb-3">
            <label for="email" class="form-label">Email address</label>
            <input type="email" class="form-control" id="email" name="email" required>
          </div>
          <div class="mb-3">
            <label for="password" class="form-label">Password</label>
            <input type="password" class="form-control" id="password" name="password" required>
            <div class="forgot-password">
              <a href="{{ url_for('forgot_password') }}">Forgot your password?</a>
            </div>
          </div>
          <div class="d-grid">
            <button type="submit" class="btn btn-login">Sign In</button>
          </div>
        </form>

        <div class="legal">
          <hr>
          <div> 2025 Scrutinise</div>
          <div class="badges">
            <div class="badge-item"><i class="bi bi-award-fill"></i> ISO 27001 Certified</div>
            <div class="badge-item"><i class="bi bi-shield-lock-fill"></i> Enterprise Security</div>
            <div class="badge-item"><i class="bi bi-globe2"></i> Global Compliance</div>
          </div>
        </div>

        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            <div class="mt-3">
              {% for category, message in messages %}
                <div class="alert alert-{{ 'danger' if category == 'error' else category }}">{{ message }}</div>
              {% endfor %}
            </div>
          {% endif %}
        {% endwith %}
      </div>
    </div>
  </div>
</div>
{% endblock %}